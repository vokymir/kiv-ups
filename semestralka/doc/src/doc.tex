\documentclass[czech, kiv, he, sem, pdf, viewonly]{fasthesis}

\usepackage{pdfpages}

\usepackage{float}

\title{Karetní hra prší pro dva hráče realizovaná nad TCP}

\author{Jakub}{Vokoun}{}{}

\nobastardtitle \nocopyrightnotice

\begin{document} \frontpages[notm]

\tableofcontents

\chapter{Zadání}

Pro karetní hru prší, v konkrétních pravidlech: nedá se přebíjet sedmička ani
eso, měnič mění pouze na svojí barvu, naprogramujte server v jazyce C nebo C++
spustitelný běžnými nástroji na OS GNU/Linux. Vytvořte klienta v jiném jazyce
(zvolen Python) jako přenositelnou aplikaci, která podporuje GNU/Linux i MS
Windows.

Síťová hra pro více hráčů s architekturou 1:N (server - klienti) fungující nad
protokolem TCP, za použití standardních BSD socketů. Cílem semestrální práce je
fungující aplikace s dobrým návrhem protokolu a jeho implementací.

\chapter{Protokol}

Komunikace mezi serverem a klientem není řízená celou dobu z jedné strany.
Samotná hra je iniciovaná a řízená serverem, pohyb klienta po serveru je řízen
klientem.

Klient se může v jednu chvíli nacházet pouze v jednom stavu. Stavy jsou
následující:

\begin{itemize}

    \item unnamed

    \item lobby

    \item room

    \item game

\end{itemize}


\begin{figure}[H]

    \centering

    \includegraphics[width=0.5\textwidth]{img/protocol_flow.pdf}

    \caption{Průchod klienta serverem.}

    \label{fig:protocol_flow}

\end{figure}

% TODO: jake stavy ma room

Zprávy v protokolu mají proměnnou délku, v závislosti jak na typu zprávy, tak i
na přenášených datech. Protokol používá lidsky čitelná anglická slova psaná
velkými písmeny. Jednotlivé části zprávy jsou odděleny mezerou, zprávy jsou od
sebe odděleny znakem |. Protokol vypadá následovně:

\input{partials/protocol.tex}

Poznámky k protokolu:

\begin{itemize}

    \item Výběr jména nemůže neuspět, jelikož pokud si klient zvolí jméno
        stejné, jako již existující hráč, server předpokládá změnu koncového
        zařízení klienta a hráči nastaví nový FD, tedy přiřadí hráče novému
        socketu.

\end{itemize}


\backmatter \backpage \end{document}
