\begin{center}

    \begin{longtable}{p{5cm} p{2cm} p{7cm}}

    \caption{Popis veškerých zpráv v protokolu. Pokud je zpráva variabilní, část z ní se opakuje v závislosti na něčem, je tato opakující se část uzavřena mezi symboly \# (které se v protokolu nevyužívají). Statické části zpráv jsou psány velkými písmeny, proměnné malými.}
    \label{tab:proto}\\

    \toprule[1.5pt] \textbf{zpráva} & \textbf{povolené stavy} & \textbf{popis} \\ \midrule
    \endfirsthead

    \multicolumn{3}{c}{\tablename{}~\thetable{} \textit{(pokračování z~předchozí
    stránky)}}\\ \midrule \textbf{zpráva} & \textbf{povolené stavy}& \textbf{popis} \\
    \midrule \endhead

    \midrule \multicolumn{3}{r}{\textit{(tabulka pokračuje na další stránce)}}\\
    \endfoot

    \bottomrule[1.5pt] \endlastfoot

    \multicolumn{3}{c}{\textbf{Zprávy iniciované klientem}}\\
    \midrule

    NAME string & unnamed & Klient si zvolí libovolné jméno.\\
    OK NAME & unnamed & Server potvrdí výběr jména.\\

    LIST\_ROOMS & lobby & Klient prosí server o seznam místností.\\
    ROOMS count \# id room-state \# & lobby & Server posílá seznam místností, každá má svůj číselný identifikátor (int) a stav (string).\\

    JOIN\_ROOM id & lobby & Klient žádá o připojení do místnosti.\\
    OK JOIN\_ROOM & lobby & Server potvrzuje připojení do místnosti.\\
    FAIL JOIN\_ROOM & lobby & Server nemohl přiřadit klienta do místnosti (byla plná, neexistovala).\\

    CREATE\_ROOM & lobby & Klient se pokouší vytvořit místnost.\\
    OK CREATE\_ROOM & lobby & Server vytvořil místnost a přiřadil do ní klienta.\\
    FAIL CREATE\_ROOM & lobby & Server nemohl vytvořit místnost (dosažen limit místností).\\

    ROOM\_INFO & room/game & Klient žádá podrobnější informace o místnosti, ve které se nachází.\\
    ROOM id room-state PLAYERS count \# name state \# & room/game & Server posílá informace o serveru.\\

    LEAVE\_ROOM & room/game & Klient opouští místnost.\\
    OK LEAVE\_ROOM & room/game (/lobby) & Server potvrzuje opuštění místnosti. Klientská aplikace tou dobou už může být v lobby, v závislosti na implementaci.\\

    \multicolumn{3}{c}{\textbf{Zprávy iniciované serverem}}\\
    \midrule

    GAME\_START & room & Server upozorňuje všechny hráče v místnosti, že začíná hra.\\
    OK GAME\_START & game & Klient potvrzuje serveru, že začíná hra.\\

    HAND count \# suitrank \# & game & Server pošle hráči jeho karty, vždy ve formátu H7 například.\\
    OK HAND & game & Klient potvzuje přijetí ruky.\\

    TURN name TOP suitrank & game & Server oznamuje že je nové kolo, kdo je na tahu a jaká je svrchní karta.\\
    OK TURN & game & Klient potvzuje přijetí TURN zprávy.\\
    PLAY suitrank & game & Klient, který je na tahu posílá, jak chce hrát.\\
    DRAW & game & Klient, který je na tahu, si líže.\\

    PLAYED name suitrank & game & Server oznamuje, že hráč zahrál kartu - a jakou.\\
    OK PLAYED & game & Klient potvzuje zprávu PLAYED.\\

    DRAWED name count & game & Server oznamuje, že hráč si líznul počet karet.\\
    OK DRAWED & game & Klient potvzuje zprávu DRAWED.\\

    SKIP name & game & Server oznamuje, že hráč je přeskočen (kvůli kartě eso).\\
    OK SKIP & game & Klient potvrzuje zprávu SKIP.\\

    CARDS count \# suitrank \# & game & Server posílá hráči karty, které si líznul.\\
    OK CARDS & game & Klient potvrzuje, že si líznul karty.\\

    WIN & game & Server oznamuje hráči, že vyhrál danou hru.\\
    LOSE & game & Server oznamuje hráči, že prohrál danou hru.\\

    OK WIN & game & Klient potvzuje zprávu WIN.\\
    OK LOSE & game & Klient potvzuje zprávu LOSE.\\

    \multicolumn{3}{c}{\textbf{Režijní zprávy}}\\
    \midrule

    PING & - & Server se dotazuje klienta, zda stále žije.\\
    PONG & - & Klient odpovídá serveru, že stále žije.\\

    SLEEP name & room/game & Server oznamuje hráčům v místnosti, že jiný hráč je dočasně nedostupný.\\
    OK SLEEP & room/game & Klient potvruje zprávu SLEEP.\\

    AWAKE name & room/game & Server oznamuje hráčům v místnosti, že hráč, který byl dočasně nedostupný, je opět online.\\
    OK AWAKE & room/game & Klient potvrzuje zprávu AWAKE.\\

    DEAD name & room/game & Server oznamuje hráčům v místnosti, že jiný hráč byl odpojen z důvodu nedostupnosti.\\
    OK DEAD & room/game & Klient potvrzuje zprávu DEAD.\\


  \end{longtable}

\end{center}
